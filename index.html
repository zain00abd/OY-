<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OY</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>





  <div class="container" style="display: none;">
    <h1>يرجى تشغيل VPN</h1>
    <p>للوصول إلى هذا الموقع، يجب عليك تشغيل خدمة VPN الخاصة بك.</p>
    <p>يرجى تشغيل VPN الخاص بك وإعادة تحميل الصفحة للوصول إلى المحتوى.</p>
    <button class="reload-button" onclick="location.reload()">
      <i class="fas fa-sync-alt"></i> إعادة التحميل
    </button>
  </div>

  



    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
    import { getDatabase, update, get, set, ref, onChildAdded, push, child} from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";
    const Config = {
      apiKey: "AIzaSyBhPBlerMZGPPn9mfYsZYuIBH0sjAcDoBY",
      authDomain: "oy-goethe.firebaseapp.com",
      databaseURL: "https://oy-goethe-default-rtdb.firebaseio.com",
      projectId: "oy-goethe",
      storageBucket: "oy-goethe.appspot.com",
      messagingSenderId: "1080444425010",
      appId: "1:1080444425010:web:8a7fe567e8d82363cb7d2b"
    };
    const app = initializeApp(Config);
    const db = getDatabase(app);
    const dbRef = ref(db, 'bool')
    let isbac = true;
    let numtur = 0

    onChildAdded(dbRef, (data) => {
  try {
    if (data.val() == false) {
      location.replace('https://zain00abd.github.io/Accesserror/');
      isbac = false;

    } else if (data.val() == true) {
      numtur++
      isbac = false;
      openpage(numtur)
    } else {
      throw new Error("لا يمكن الحصول على البيانات");
    }
  } catch (error) {
    console.log("فشل في الحصول على البيانات:", error.message);
    document.querySelector('.container').style.display = 'block'
  }
});

get(ref(db,'resmax')).then ((data1) =>{
  if(data1.val().num == 0){
    location.replace('https://zain00abd.github.io/Accesserror/');
    isbac = false;
  }
  else
  {
    numtur++
    isbac = false;
    openpage(numtur)
  }
  
})


function openpage(numopen){
  if(numopen == 2){
    location.replace('https://zain00abd.github.io/YO-Goethe/');
  }
}


setTimeout(() =>{
  if(isbac){
    console.log(isbac)
    document.querySelector('.container').style.display = 'block'
  }
  console.log(numtur)
},1000)


    </script>
</body>
</html>